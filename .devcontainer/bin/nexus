#!/usr/bin/env bash

SCRIPT_DIR=$(cd -- "$(dirname -- "${BASH_SOURCE[0]}")" &>/dev/null && pwd)
PROJECT_DIR="$SCRIPT_DIR/../.."

COMMAND="$1"

setup_venv() {
  cd $PROJECT_DIR/backend && eval $(poetry env activate)
}

start__app() {
  setup_venv
  cd $PROJECT_DIR/backend && eval "python -m uvicorn main:app --proxy-headers --reload --host 0.0.0.0 --port 5002"
}

start() {
  start__app
}

$COMMAND